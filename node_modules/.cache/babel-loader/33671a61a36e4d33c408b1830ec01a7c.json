{"ast":null,"code":"var _jsxFileName = \"/home/abugra/Desktop/dogs-app-homework-ahmetbcakici/src/containers/Homepage.js\";\nimport React from 'react';\nimport dogs from '../dogsdata';\nimport { Button } from 'reactstrap';\nimport FavoriteActions from '../components/FavoriteActions';\nimport Dog from '../components/Dog';\nimport axios from 'axios';\nconst apiHost = 'https://5ea8a2e735f372001660949f.mockapi.io';\n\nclass Homepage extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.toggle = dogId => {\n      this.setState({\n        disabled: true\n      });\n      const foundDog = this.state.favorites.find(favorite => favorite.dogId === dogId);\n\n      if (foundDog) {\n        axios.delete(`${apiHost}/favorites/${foundDog.id}`).then(result => {\n          this.setState({\n            favorites: this.state.favorites.filter(dog => dog.dogId !== dogId),\n            disabled: false\n          });\n        }).catch(err => {\n          console.log(err);\n        });\n      } else {\n        // window.localStorage.setItem(\"favorites\", JSON.stringify(this.state.favorites));\n        axios.post(`${apiHost}/favorites`, {\n          dogId\n        }).then(result => {\n          const eklenenFavori = result.data; // {id: 1, dogId: benim yolladigim dog id, createdat: date}\n\n          this.setState({\n            favorites: [...this.state.favorites, eklenenFavori],\n            disabled: false\n          });\n        }).catch(err => {\n          console.log(err);\n        });\n      }\n    };\n\n    this.getStatus = dogId => {\n      const foundDog = this.state.favorites.find(favorite => favorite.dogId === dogId);\n      return foundDog;\n    };\n\n    this.state = {\n      favorites: [],\n      loadingFavorites: false,\n      disabled: false\n    };\n  }\n\n  componentDidMount() {\n    // localstoragedan getirme\n\n    /*        this.setState({\n            favorites: window.localStorage.getItem(\"favorites\") ? JSON.parse(window.localStorage.getItem(\"favorites\")): []\n        })*/\n    this.setState({\n      loadingFavorites: true\n    }, () => {\n      axios.get(`${apiHost}/favorites`).then(result => {\n        this.setState({\n          favorites: result.data,\n          loadingFavorites: false\n        });\n      }).catch(err => {\n        console.log('Axios err', err);\n        this.setState({\n          loadingFavorites: false\n        });\n      });\n    });\n  }\n\n  render() {\n    if (this.state.loadingFavorites) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"h1\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 11\n        }\n      }, \"Sayfa Yukleniyor.....\"));\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"ul\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 9\n      }\n    }, dogs.map(dog => {\n      return /*#__PURE__*/React.createElement(Dog, Object.assign({\n        toggle: this.toggle,\n        id: dog.id,\n        getStatus: this.getStatus,\n        disabled: this.state.disabled\n      }, dog, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 15\n        }\n      }));\n    })));\n  }\n\n}\n\nexport default Homepage;","map":{"version":3,"sources":["/home/abugra/Desktop/dogs-app-homework-ahmetbcakici/src/containers/Homepage.js"],"names":["React","dogs","Button","FavoriteActions","Dog","axios","apiHost","Homepage","Component","constructor","props","toggle","dogId","setState","disabled","foundDog","state","favorites","find","favorite","delete","id","then","result","filter","dog","catch","err","console","log","post","eklenenFavori","data","getStatus","loadingFavorites","componentDidMount","get","render","map"],"mappings":"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","sourcesContent":["import React from 'react';\nimport dogs from '../dogsdata';\nimport {Button} from 'reactstrap';\nimport FavoriteActions from '../components/FavoriteActions';\nimport Dog from '../components/Dog';\nimport axios from 'axios';\n\nconst apiHost = 'https://5ea8a2e735f372001660949f.mockapi.io';\n\nclass Homepage extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      favorites: [],\n      loadingFavorites: false,\n      disabled: false,\n    };\n  }\n  componentDidMount() {\n    // localstoragedan getirme\n    /*        this.setState({\n            favorites: window.localStorage.getItem(\"favorites\") ? JSON.parse(window.localStorage.getItem(\"favorites\")): []\n        })*/\n\n    this.setState(\n      {\n        loadingFavorites: true,\n      },\n      () => {\n        axios\n          .get(`${apiHost}/favorites`)\n          .then((result) => {\n            this.setState({\n              favorites: result.data,\n              loadingFavorites: false,\n            });\n          })\n          .catch((err) => {\n            console.log('Axios err', err);\n            this.setState({\n              loadingFavorites: false,\n            });\n          });\n      }\n    );\n  }\n\n  toggle = (dogId) => {\n    this.setState({disabled: true});\n    const foundDog = this.state.favorites.find(\n      (favorite) => favorite.dogId === dogId\n    );\n    if (foundDog) {\n      axios\n        .delete(`${apiHost}/favorites/${foundDog.id}`)\n        .then((result) => {\n          this.setState({\n            favorites: this.state.favorites.filter(\n              (dog) => dog.dogId !== dogId\n            ),\n            disabled: false,\n          });\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    } else {\n      // window.localStorage.setItem(\"favorites\", JSON.stringify(this.state.favorites));\n      axios\n        .post(`${apiHost}/favorites`, {\n          dogId,\n        })\n        .then((result) => {\n          const eklenenFavori = result.data; // {id: 1, dogId: benim yolladigim dog id, createdat: date}\n          this.setState({\n            favorites: [...this.state.favorites, eklenenFavori],\n            disabled: false,\n          });\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    }\n  };\n\n  getStatus = (dogId) => {\n    const foundDog = this.state.favorites.find(\n      (favorite) => favorite.dogId === dogId\n    );\n    return foundDog;\n  };\n\n  render() {\n    if (this.state.loadingFavorites) {\n      return (\n        <div>\n          <h1>Sayfa Yukleniyor.....</h1>\n        </div>\n      );\n    }\n    return (\n      <div>\n        <ul>\n          {dogs.map((dog) => {\n            return (\n              <Dog\n                toggle={this.toggle}\n                id={dog.id}\n                getStatus={this.getStatus}\n                disabled={this.state.disabled}\n                {...dog}\n              />\n            );\n          })}\n        </ul>\n      </div>\n    );\n  }\n}\n\nexport default Homepage;\n"]},"metadata":{},"sourceType":"module"}